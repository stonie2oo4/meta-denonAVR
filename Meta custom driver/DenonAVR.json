{   "name":"DenonAVR",
    "manufacturer":"Denon",
    "type":"AVRECEIVER",
    "version":1,
     "variables":{
       "MyStatus":"",
       "IsMuted":true,
       "VolumePlayed":50,
       "TelnetURI": "192.168.5.20",
       "TelnetPort":"23"
    },
    "labels":{
        "Response" : {"label":"status", "listen":"MyStatus"}
    },
    "listeners":{
        "DenonStatus" : {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MV?"}, "pooltime":"3000", "poolduration":"", "queryresult" : "$.", 
          "evalwrite" : [
          {"variable" : "VolumePlayed","value" : "DYNAMIK Math.round(Number(JSON.parse(\"$Result\")[0].volume)*100/98)"}
        ]}
    },
    "sliders":{
        "VOLUME": {"label":"", "unit" : "db", "listen" : "VolumePlayed", "evaldo":[{"test":true, "then":"__VOLUMESET", "or":""}]}
    },
    "buttons":{
        "POWER ON": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "PWON"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==PWON)?\"Receiver On\":\"command Failed\""}], "evaldo":[{"test":true,"then":"__INITIALISE", "or":""}]},
        "POWER OFF": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "PWSTANDBY"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==PWSTANDBY)?\"Receiver Off\":\"Command Failed\""}], "evaldo":[{"test":true,"then":"__CLEANUP", "or":""}]},
        "VOLUME UP": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MVUP"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MVUP)?\"Volume Up\":\"Command Failed\""}]},
        "VOLUME DOWN": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MVDOWN"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MVDOWN)?\"Volume Down\":\"Command Failed\""}]},
        "MUTE TOGGLE": {"label":"", "type":"static", "command":"", "evalwrite":[{"variable":"IsMuted","value":"DYNAMIK ($IsMuted==false)?true:false" }], "evaldo":[{"test":"DYNAMIK $IsMuted", "then":"__MUTEON", "or":"__MUTEOFF"}]},
        "__MUTEON": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MUON"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MUON)?\"Receiver muted\":\"Command failed\""}]},
        "__MUTEOFF": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MUOFF"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MUOFF)?\"Receiver unmuted\":\"Command failed\""}]},
        "CURSOR UP": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNCUP"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNCUP)?\"Cursor Up\":\"Command Failed\""}]},
        "CURSOR DOWN": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNCDN"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNCDN)?\"Cursor Down\":\"Command Failed\""}]},
        "CURSOR LEFT": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNCLT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNCLT)?\"Cursor Left\":\"Command Failed\""}]},
        "CURSOR RIGHT": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNCRT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNCRT)?\"Cursor Right\":\"Command Failed\""}]},
        "CURSOR ENTER": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNENT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNENT)?\"Cursor Enter\":\"Command Failed\""}]},
        "MENU": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNMEN ON"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNMEN ON)?\"Menu\":\"Command Failed\""}]},
        "BACK": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MNRTN"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MNRTN)?\"Back\":\"Command Failed\""}]},
        "INPUT CD": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SICD"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SICD)?\"Input CD set\":\"Command Failed\""}]},
        "INPUT TUNER": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SITUNER"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SITUNER)?\"Input Tuner set\":\"Command Failed\""}]},
        "INPUT DVD": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIDVD"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIDVD)?\"Input DVD set\":\"Command Failed\""}]},
        "INPUT BD": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIBD"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIBD)?\"Input BD set\":\"Command Failed\""}]},
        "INPUT TV": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SITV"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SITV)?\"Input TV set\":\"Command Failed\""}]},
        "INPUT SAT/CBL": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SISAT/CBL"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SISAT/CBL)?\"Input Sat/Cbl set\":\"Command Failed\""}]},
        "INPUT MPLAY": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIMPLAY"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIMPLAY)?\"Input MPlay set\":\"Command Failed\""}]},
        "INPUT HDRADIO": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIHDRADIO"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIHDRADIO)?\"Input HDRadio set\":\"Command Failed\""}]},
        "INPUT NET": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SINET"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SINET)?\"Input Net set\":\"Command Failed\""}]},
        "INPUT PANDORA": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIPANDORA"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIPANDORA)?\"Input Pandora set\":\"Command Failed\""}]},
        "INPUT SIRIUSXM": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SISIRIUSXM"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SISIRIUSXM)?\"Input SiriusXM set\":\"Command Failed\""}]},
        "INPUT SPOTIFY": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SISPOTIFY"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SISPOTIFY)?\"Input Spotify set\":\"Command Failed\""}]},
        "INPUT LASTFM": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SILASTFM"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SILASTFM)?\"Input LastFM set\":\"Command Failed\""}]},
        "INPUT FLICKR": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIFLICKR"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIFLICKR)?\"Input Flickr set\":\"Command Failed\""}]},
        "INPUT IRADIO": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIIRADIO"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIIRADIO)?\"Input IRadio set\":\"Command Failed\""}]},
        "INPUT SERVER": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SISERVER"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SISERVER)?\"Input Server set\":\"Command Failed\""}]},
        "INPUT FAVORITES": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIFAVORITES"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIFAVORITES)?\"Input Favorites set\":\"Command Failed\""}]},
        "INPUT AUX1": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX1"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX1)?\"Input AUX1 set\":\"Command Failed\""}]},
        "INPUT AUX2": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX2"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX2)?\"Input AUX2 set\":\"Command Failed\""}]},
        "INPUT AUX3": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX3"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX3)?\"Input AUX3 set\":\"Command Failed\""}]},
        "INPUT AUX4": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX4"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX4)?\"Input AUX4 set\":\"Command Failed\""}]},
        "INPUT AUX5": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX5"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX5)?\"Input AUX5 set\":\"Command Failed\""}]},
        "INPUT AUX6": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAUX6"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAUX6)?\"Input AUX6 set\":\"Command Failed\""}]},
        "INPUT BT": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIBT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIBT)?\"Input BT set\":\"Command Failed\""}]},
        "INPUT USB": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIUSB"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIUSB)?\"Input USB set\":\"Command Failed\""}]},
        "INPUT AIRPLAY": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "SIAIRPLAY"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==SIAIRPLAY)?\"Input Airplay set\":\"Command Failed\""}]},
        "SUR:MOVIE": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSMOVIE"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSMOVIE)?\"Surround Movie set\":\"Command Failed\""}]},
        "SUR:MUSIC": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSMUSIC"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSMUSIC)?\"Surround Music set\":\"Command Failed\""}]},
        "SUR:GAME": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSGAME"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSGAME)?\"Surround Game set\":\"Command Failed\""}]},
        "SUR:DIRECT": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSDIRECT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSDIRECT)?\"Surround Direct set\":\"Command Failed\""}]},
        "SUR:PURE DIRECT": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSPURE DIRECT"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSPURE DIRECT)?\"Surround Pure Direct set\":\"Command Failed\""}]},
        "SUR:STEREO": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSSTEREO"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSSTEREO)?\"Surround Stereo set\":\"Command Failed\""}]},
        "SUR:AUTO": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MSAUTO"}, "queryresult":"$.response_code", "evalwrite":[{"variable":"MyStatus","value":"DYNAMIK ($Result==MSAUTO)?\"Surround Auto set\":\"Command Failed\""}]},
        "__VOLUMESET": {"label":"", "type":"telnet", "command":{"TelnetParms": {"host":"$TelnetURI","port":"$TelnetPort"},"message": "MV\" + (Math.round(0 + (98 - 0) * Number($VolumePlayed) / 100).toString())"}
    }
    }
}
